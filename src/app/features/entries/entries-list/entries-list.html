<div class="entries-container">
  <div class="header">
    <h2>Decision Log Entries</h2>
    <button mat-raised-button color="primary" (click)="onCreateNew()">
      <mat-icon>add</mat-icon>
      New Entry
    </button>
  </div>

  <!-- Loading spinner -->
  <div *ngIf="loading$ | async" class="loading-container">
    <mat-spinner diameter="40"></mat-spinner>
    <p>Loading entries...</p>
  </div>

  <!-- Entries list -->
  <div *ngIf="!(loading$ | async)" class="entries-list">
    <mat-card
      *ngFor="let entry of entriesViewModel$ | async; trackBy: trackById"
      class="entry-card"
      [class.selected]="entry.id === (selectedEntryId$ | async)"
      (click)="onViewEntry(entry.id)"
    >
      <mat-card-header>
        <mat-card-title>
          <mat-icon>{{ entry.statusIcon }}</mat-icon>
          {{ entry.title }}
        </mat-card-title>
        <mat-card-subtitle>
          {{ entry.displayDate }}
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <div class="entry-meta">
          <mat-chip-set>
            <mat-chip [color]="entry.categoryColor" highlighted>
              {{ entry.category }}
            </mat-chip>
            <mat-chip>{{ entry.status }}</mat-chip>
          </mat-chip-set>
        </div>

        <div class="content-preview"><p>{{ entry.preview }}</p></div>
      </mat-card-content>

      <mat-card-actions align="end">
        <button mat-button color="primary" (click)="onEditEntry(entry.id, $event)">
          <mat-icon>edit</mat-icon>
          Edit
        </button>
      </mat-card-actions>
    </mat-card>

    <!-- Empty state -->
    <div *ngIf="(entriesViewModel$ | async)?.length === 0" class="empty-state">
      <mat-icon>inbox</mat-icon>
      <p>No entries yet. Start documenting your decisions!</p>
    </div>
  </div>

  <!-- Selected entry detail (placeholder) -->
  <mat-card *ngIf="selectedEntryId$ | async" class="selected-detail">
    <mat-card-header>
      <mat-card-title>Selected Entry</mat-card-title>
      <button mat-icon-button (click)="onDeselectEntry()">
        <mat-icon>close</mat-icon>
      </button>
    </mat-card-header>
    <mat-card-content>
      <p>Entry ID: {{ selectedEntryId$ | async }}</p>
      <p><em>Detail view will be built in Phase 4</em></p>
    </mat-card-content>
  </mat-card>
</div>
